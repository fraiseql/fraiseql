# Fraisier Environment Configuration
# Copy this file to .env and update values for your environment

# ============================================================================
# Database Configuration
# ============================================================================
DATABASE_URL=postgresql://fraisier:fraisier_password@postgres:5432/fraisier

# ============================================================================
# Fraisier Application Settings
# ============================================================================
FRAISIER_LOG_LEVEL=INFO
FRAISIER_WEBHOOK_SECRET=dev-webhook-secret-change-me
PROMETHEUS_PORT=8001

# ============================================================================
# NATS Event Bus Configuration
# ============================================================================

# NATS Server Connection
# For local development: nats://nats:4222 (via docker-compose)
# For production: nats://nats-host-1:4222,nats://nats-host-2:4222 (cluster)
NATS_SERVERS=nats://nats:4222

# NATS Authentication
# Default credentials for development
NATS_USERNAME=fraisier
NATS_PASSWORD=fraisier_password

# NATS Connection Parameters
# Timeout for connection establishment in seconds
NATS_TIMEOUT=5

# Maximum number of reconnection attempts
NATS_MAX_RECONNECT_ATTEMPTS=60

# Time to wait between reconnection attempts in seconds
NATS_RECONNECT_TIME_WAIT=2

# Regional Deployment Configuration
# Used for multi-region deployments to tag events with region information
# Examples: "us-east-1", "us-west-2", "eu-west-1", "default"
NATS_REGION=default

# ============================================================================
# NATS Stream Configuration
# ============================================================================

# Deployment Events Stream Settings
# Retention period for deployment events (hours)
# Default: 720 (30 days)
NATS_DEPLOYMENT_EVENTS_RETENTION=720

# Health Check Events Stream Settings
# Retention period for health check events (hours)
# Default: 168 (7 days)
NATS_HEALTH_EVENTS_RETENTION=168

# Database Events Stream Settings
# Retention period for database change events (hours)
# Default: 720 (30 days)
NATS_DATABASE_EVENTS_RETENTION=720

# Metrics Events Stream Settings
# Retention period for metrics events (hours)
# Default: 168 (7 days)
NATS_METRICS_EVENTS_RETENTION=168

# Max size for each stream (bytes)
# Default: 1GB (1073741824 bytes)
NATS_STREAM_MAX_SIZE=1073741824

# ============================================================================
# Monitoring and Observability
# ============================================================================

# Grafana Admin Credentials
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# Prometheus Configuration
PROMETHEUS_RETENTION=15d

# Redis Cache (optional, for distributed deployments)
REDIS_PASSWORD=redis_password

# ============================================================================
# Development/Production Settings
# ============================================================================

# Environment: development, staging, production
ENVIRONMENT=development

# Enable verbose logging for debugging
DEBUG=false

# Enable profiling
ENABLE_PROFILING=false

# ============================================================================
# Multi-Region Deployment Settings
# ============================================================================

# List of all deployment regions (comma-separated)
# Used for coordinating deployments across regions
DEPLOYMENT_REGIONS=default

# Inter-region communication timeout (seconds)
INTER_REGION_TIMEOUT=30

# ============================================================================
# Security Settings
# ============================================================================

# TLS Configuration (uncomment for production)
# NATS_TLS_ENABLED=true
# NATS_TLS_CERT_FILE=/etc/nats/certs/server.crt
# NATS_TLS_KEY_FILE=/etc/nats/certs/server.key
# NATS_TLS_CA_FILE=/etc/nats/certs/ca.crt

# ============================================================================
# Event Handler Configuration
# ============================================================================

# Enable webhook notifications for deployment events
ENABLE_WEBHOOK_NOTIFICATIONS=true

# Webhook URL for deployment events
# DEPLOYMENT_WEBHOOK_URL=https://example.com/webhooks/deployments

# Enable metrics recording
ENABLE_METRICS_RECORDING=true

# Enable event logging to database
ENABLE_EVENT_LOGGING=true
