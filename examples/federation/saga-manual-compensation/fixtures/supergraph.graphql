schema @link(url: "https://specs.apollo.dev/federation/v2.0") {
  query: Query
  mutation: Mutation
}

type Query {
  account(accountId: ID!): Account @join__field(graph: BANK)
}

type Mutation {
  transferMoney(fromAccountId: ID!, toAccountId: ID!, amount: Float!, transactionId: String!): Transfer! @join__field(graph: BANK)
  compensateTransfer(transactionId: String!): Transfer! @join__field(graph: BANK)
}

type Account @join__type(graph: BANK, key: "id") {
  id: ID!
  accountNumber: String!
  accountHolder: String!
  balance: Float!
  status: String!
}

type Transfer @join__type(graph: BANK) {
  transactionId: ID!
  status: String!
  fromBalance: Float
  toBalance: Float
  message: String
}

directive @join__field(graph: String, requires: String, provides: String, type: String, external: Boolean, override: String, usedOverridden: Boolean) repeatable on FIELD_DEFINITION
directive @join__type(graph: String, key: String, extension: Boolean, resolvable: Boolean, isInterfaceObject: Boolean) repeatable on OBJECT | INTERFACE | UNION | ENUM | SCALAR | INPUT_OBJECT
directive @join__union(graph: String, member: String) repeatable on UNION
directive @join__enumValue(graph: String) repeatable on ENUM_VALUE
directive @join__implements(graph: String, interface: String) repeatable on OBJECT | INTERFACE
directive @join__graph(name: String!, url: String!) on ENUM_VALUE
directive @link(url: String, as: String, for: String, import: [String]) repeatable on SCHEMA

enum join__Graph {
  BANK @join__graph(name: "bank" url: "http://bank-service:4000/graphql")
}
