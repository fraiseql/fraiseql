â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        FRAISIER INTEGRATION SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHAT IS FRAISIER?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Deployment orchestrator for the FraiseQL ecosystem
  â€¢ Listens for Git webhooks (GitHub, GitLab, Gitea, Bitbucket)
  â€¢ Deploys services based on branch mapping
  â€¢ Tracks deployment history
  â€¢ Supports 4 service types: API, ETL, Scheduled, Backup

CURRENT STATUS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Code: Feature complete (Python package)
  âœ… Features: All 4 Git providers, all 4 service types
  âš ï¸  Problem: Duplicated in two locations
      - /home/lionel/code/fraisier/          (original)
      - /home/lionel/code/fraiseql/fraisier/ (copy)
  â³ Integration: Not yet connected to fraiseql-server/fraiseql-cli

FUTURE VISION: FRAISIER AS A GRAPHQL API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Fraisier will eventually be a **GraphQL API** powered by FraiseQL:

  Query Examples:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ query {                                                                 â”‚
  â”‚   fraise(id: "my_api") {                                               â”‚
  â”‚     id                                                                  â”‚
  â”‚     name                                                                â”‚
  â”‚     deploymentHistory(limit: 5) {                                       â”‚
  â”‚       id                                                                â”‚
  â”‚       status                                                            â”‚
  â”‚       startedAt                                                         â”‚
  â”‚     }                                                                   â”‚
  â”‚   }                                                                     â”‚
  â”‚ }                                                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Mutation Examples:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ mutation {                                                              â”‚
  â”‚   deploy(fraiseId: "my_api", environment: "production") {              â”‚
  â”‚     id                                                                  â”‚
  â”‚     status                                                              â”‚
  â”‚   }                                                                     â”‚
  â”‚ }                                                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ARCHITECTURE COMPONENTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Fraisier Python CLI (now)                                            â”‚
  â”‚ â”œâ”€ cli.py         - Click CLI interface                             â”‚
  â”‚ â”œâ”€ webhook.py     - FastAPI webhook server                          â”‚
  â”‚ â”œâ”€ config.py      - YAML configuration parsing                      â”‚
  â”‚ â”œâ”€ database.py    - SQLite with CQRS pattern                        â”‚
  â”‚ â”œâ”€ deployers/     - Deployment strategies (api, etl, etc.)          â”‚
  â”‚ â””â”€ git/           - Git provider abstractions                       â”‚
  â”‚                                                                       â”‚
  â”‚ + FraiseQL GraphQL API (future)                                      â”‚
  â”‚ â”œâ”€ Schema (@fraiseql decorators)                                    â”‚
  â”‚ â”œâ”€ Database views & functions                                       â”‚
  â”‚ â”œâ”€ Query resolvers                                                  â”‚
  â”‚ â”œâ”€ Mutation resolvers                                               â”‚
  â”‚ â””â”€ Subscription resolvers (real-time)                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY CONCEPTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Fraise (Strawberry)     = Deployable service
  Fraisier (Plant)        = Orchestrator managing fraises
  CQRS Pattern            = Append-only writes, optimized reads (views)
  Webhook Signature       = HMAC-SHA256 verification
  Branch Mapping          = Branch â†’ Fraise + Environment routing
  Deployment Strategy     = Different steps per service type

INTEGRATION WITH FRAISEQL CORE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Needs:
  âœ… fraiseql-python     (Phase 8) - For @fraiseql decorators
  â³ fraiseql-server     (Phase 6) - To run GraphQL API
  â³ fraiseql-cli        (Phase 9) - To compile schema

  Provides:
  âœ… E2E testing (webhook â†’ deploy â†’ run)
  âœ… Real-world example (shows how to build production apps)
  âœ… Proof of ecosystem (multi-language support)

DOCUMENTATION CREATED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… FRAISIER_INTEGRATION_ANALYSIS.md     (400 lines)
     â†’ Comprehensive architecture, patterns, risks, phases

  âœ… FRAISIER_QUICK_REFERENCE.md         (300 lines)
     â†’ Daily reference for CLI, config, webhooks, troubleshooting

  âœ… FRAISIER_ACTION_ITEMS.md            (250 lines)
     â†’ Concrete tasks organized by phase with estimates

  âœ… FRAISIER_GRAPHQL_API.md             (400 lines)
     â†’ Complete GraphQL schema, examples, implementation guide

  âœ… README_FRAISIER_DOCS.md             (150 lines)
     â†’ Navigation guide for documentation

IMMEDIATE ACTIONS (THIS WEEK)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. DECIDE: Keep in monorepo or separate?
     RECOMMENDED: Delete /home/lionel/code/fraisier/
     â†’ Make /home/lionel/code/fraiseql/fraisier/ authoritative
     â†’ Effort: 5 minutes

  2. VERIFY: Monorepo copy is complete
     Check all files present in /home/lionel/code/fraiseql/fraisier/
     â†’ Effort: 10 minutes

  3. QUALITY: Run linting and tests
     ruff check . && pytest tests/
     â†’ Effort: 30 minutes

PHASE ROADMAP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Phase 0: Consolidation (Week 1)
  â”œâ”€ Remove duplication
  â”œâ”€ Update README
  â””â”€ Code quality check

  Phase 1-2: Documentation (Weeks 2-3)
  â”œâ”€ Git provider setup guides
  â”œâ”€ Deployment guides
  â””â”€ Troubleshooting guide

  Phase 3: Testing (Weeks 4-5)
  â”œâ”€ Unit tests
  â”œâ”€ Integration tests
  â””â”€ Load tests

  Phase 4: Schema & Database (Weeks 6-7)
  â”œâ”€ Define @fraiseql types
  â”œâ”€ Create database schema
  â””â”€ Implement CQRS pattern

  Phase 5: GraphQL API (Weeks 8-9)
  â”œâ”€ Query resolvers
  â”œâ”€ Mutation resolvers
  â””â”€ Example queries/mutations

  Phase 6: E2E with fraiseql-server (Weeks 10-11)
  â”œâ”€ Full GraphQL API testing
  â”œâ”€ Docker Compose environment
  â””â”€ CI/CD integration

  Phase 7: Production Hardening (Weeks 12+)
  â”œâ”€ Error handling
  â”œâ”€ Security (secrets, rate limiting)
  â””â”€ Performance optimization

TOTAL EFFORT: ~60 hours over 12 weeks

DEPLOYMENT WORKFLOW (CURRENT & FUTURE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. Developer pushes to main branch
  2. Git provider sends webhook
  3. Fraisier receives webhook
  4. Signature verified (HMAC)
  5. Branch mapped to fraise + environment
  6. Deployment strategy executed:
     - Git clone/pull
     - Build artifacts
     - Database migration
     - fraiseql-cli compile (future)
     - fraiseql-server restart (future)
     - Health check
  7. Result recorded in database
  8. Status accessible via:
     - CLI command (now)
     - GraphQL API (future)
     - Web dashboard (future)

DATABASE PATTERN: CQRS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Write Tables (Append-only):
  â”œâ”€ tb_deployments       (every deployment)
  â”œâ”€ tb_webhook_events    (every webhook received)
  â””â”€ tb_deployment_attempts (every attempt)

  Read Views (Query-optimized):
  â”œâ”€ v_fraise_status          (current status per environment)
  â”œâ”€ v_deployment_history     (historical queries)
  â””â”€ v_deployment_stats       (aggregated statistics)

  Benefits:
  âœ… Audit trail (immutable history)
  âœ… Query performance (materialized views)
  âœ… Scalability (append-only pattern)

GIT PROVIDERS SUPPORTED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  GitHub         â†’ HMAC-SHA256 verification
  GitLab         â†’ Secret token verification
  Gitea          â†’ HMAC-SHA256 verification
  Bitbucket      â†’ HMAC-SHA1 verification

  All providers:
  âœ… Support self-hosted (GitHub Enterprise, self-hosted GitLab, etc.)
  âœ… Webhook signature verification
  âœ… Webhook payload normalization
  âœ… Custom provider support via GitProvider interface

SERVICE TYPES SUPPORTED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  API Service
  â”œâ”€ systemd integration
  â”œâ”€ Health checks
  â”œâ”€ Database migrations
  â””â”€ Rollback procedures

  ETL Pipeline
  â”œâ”€ Script execution
  â”œâ”€ Logging
  â””â”€ Error notifications

  Scheduled Job
  â”œâ”€ systemd timers
  â”œâ”€ Cron scheduling
  â””â”€ Log rotation

  Backup Job
  â”œâ”€ Database backups
  â”œâ”€ Remote sync (S3, rsync)
  â””â”€ Retention policies

CONFIGURATION EXAMPLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  git:
    provider: github
    github:
      webhook_secret: ${FRAISIER_WEBHOOK_SECRET}

  fraises:
    my_api:
      type: api
      environments:
        production:
          branch: main
          app_path: /var/www/api
          systemd_service: api.service
          health_check:
            url: https://api.example.com/health

  branch_mapping:
    main:
      fraise: my_api
      environment: production

CLI COMMANDS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  fraisier list                      # List all fraises
  fraisier deploy api prod           # Deploy service
  fraisier status api prod           # Check status
  fraisier history                   # View deployment history
  fraisier-webhook                   # Start webhook server

NEXT STEPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ğŸ‘‰ Read documentation in .claude/ directory
     â†’ Start with README_FRAISIER_DOCS.md
     â†’ Then FRAISIER_QUICK_REFERENCE.md
     â†’ Then FRAISIER_INTEGRATION_ANALYSIS.md

  ğŸ‘‰ For project management
     â†’ See FRAISIER_ACTION_ITEMS.md for concrete tasks

  ğŸ‘‰ For GraphQL API design
     â†’ See FRAISIER_GRAPHQL_API.md for schema and examples

SUCCESS METRICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  âœ… Consolidation complete (single source of truth)
  âœ… Code quality verified (ruff, pytest passing)
  âœ… Documentation comprehensive (all providers covered)
  âœ… Testing infrastructure in place (unit, integration, E2E)
  âœ… GraphQL API implemented (queries, mutations, subscriptions)
  âœ… Integration with fraiseql-server (Phase 6)
  âœ… Production-ready (error handling, security, monitoring)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Questions? See README_FRAISIER_DOCS.md for navigation guide.
Last updated: 2026-01-15
