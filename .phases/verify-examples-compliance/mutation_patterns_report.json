{
  "example_name": "mutation-patterns",
  "total_files": 19,
  "files_checked": 19,
  "violations": [
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "users",
      "description": "Table users missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "users",
      "description": "Table users could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "posts",
      "description": "Table posts missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "posts",
      "description": "Table posts could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "comments",
      "description": "Table comments missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "comments",
      "description": "Table comments could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tags",
      "description": "Table tags missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tags",
      "description": "Table tags could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "post_tags",
      "description": "Table post_tags missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-002",
      "rule_name": "Trinity: UUID Public Identifier",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "post_tags",
      "description": "Table post_tags missing 'id UUID DEFAULT gen_random_uuid() UNIQUE'",
      "example_fix": "id UUID DEFAULT gen_random_uuid() NOT NULL UNIQUE"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/mutation-patterns/schema.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "post_tags",
      "description": "Table post_tags could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/02-validation/simple-validation.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_post",
      "description": "Function create_post modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "HF-002",
      "rule_name": "Variables: Follow Naming Convention",
      "severity": "WARNING",
      "file_path": "examples/mutation-patterns/02-validation/simple-validation.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_post",
      "description": "Function create_post has non-standard variable names: {'userId'}",
      "example_fix": "Use v_<entity>_id (UUID), v_<entity>_pk (INTEGER), p_<entity>_id (parameter)"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/02-validation/multiple-field-validation.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_user_with_validation",
      "description": "Function create_user_with_validation modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/02-validation/custom-validation-rules.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_user_with_rules",
      "description": "Function create_user_with_rules modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/03-business-logic/calculated-fields.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_order",
      "description": "Function create_order modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/03-business-logic/state-machine.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "transition_post_status",
      "description": "Function transition_post_status modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/03-business-logic/conditional-update.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "start_machine",
      "description": "Function start_machine modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/03-business-logic/conditional-update.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_user_optimistic",
      "description": "Function update_user_optimistic modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/04-relationships/update-with-cascade.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_category_and_products",
      "description": "Function update_category_and_products modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/04-relationships/delete-with-cascade.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "delete_user_with_cascade",
      "description": "Function delete_user_with_cascade modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/04-relationships/create-with-children.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_blog_post_with_tags",
      "description": "Function create_blog_post_with_tags modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/04-relationships/create-with-children.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_invoice_with_items",
      "description": "Function create_invoice_with_items modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/01-basic-crud/update-user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_user",
      "description": "Function update_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/01-basic-crud/create-user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_user",
      "description": "Function create_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/01-basic-crud/delete-user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "delete_user",
      "description": "Function delete_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/01-basic-crud/delete-user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "soft_delete_user",
      "description": "Function soft_delete_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/06-advanced/transaction-rollback.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "transfer_funds",
      "description": "Function transfer_funds modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/06-advanced/async-processing.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "import_users_async",
      "description": "Function import_users_async modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/06-advanced/async-processing.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "process_import_job",
      "description": "Function process_import_job modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/06-advanced/bulk-operations.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "bulk_create_users",
      "description": "Function bulk_create_users modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/06-advanced/bulk-operations.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "bulk_update_user_status",
      "description": "Function bulk_update_user_status modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/05-error-handling/permission-denied.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "delete_post_with_authz",
      "description": "Function delete_post_with_authz modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/05-error-handling/permission-denied.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_user_with_field_authz",
      "description": "Function update_user_with_field_authz modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/05-error-handling/conflict-duplicate.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "register_user",
      "description": "Function register_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/05-error-handling/conflict-duplicate.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_tag",
      "description": "Function create_tag modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/mutation-patterns/05-error-handling/not-found.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "add_comment",
      "description": "Function add_comment modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "HF-002",
      "rule_name": "Variables: Follow Naming Convention",
      "severity": "WARNING",
      "file_path": "examples/mutation-patterns/05-error-handling/not-found.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "add_comment",
      "description": "Function add_comment has non-standard variable names: {'userId', 'postId'}",
      "example_fix": "Use v_<entity>_id (UUID), v_<entity>_pk (INTEGER), p_<entity>_id (parameter)"
    }
  ],
  "compliance_score": 0.17368421052631577
}
