{
  "example_name": "blog_api",
  "total_files": 24,
  "files_checked": 24,
  "violations": [
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "initialize_post_stats",
      "description": "Function initialize_post_stats modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_author_post_count",
      "description": "Function update_author_post_count modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "process_post_tags",
      "description": "Function process_post_tags modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_post_search_index",
      "description": "Function update_post_search_index modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "initialize_user_preferences",
      "description": "Function initialize_user_preferences modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/functions/core_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "queue_welcome_email",
      "description": "Function queue_welcome_email modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "VW-002",
      "rule_name": "View: Include pk_* Only If Referenced",
      "severity": "WARNING",
      "file_path": "examples/blog_api/db/migrations/001_initial_schema.sql",
      "line_number": null,
      "violation_type": "view",
      "entity_name": "v_comment",
      "description": "View v_comment includes pk_* column - verify other views JOIN to it",
      "example_fix": "Only include pk_* if other views use it in JOIN conditions"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/001_initial_schema.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_updated_at_column",
      "description": "Function update_updated_at_column modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_user",
      "description": "Mutation function fn_create_user should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_user",
      "description": "Function fn_create_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_post",
      "description": "Mutation function fn_create_post should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_post",
      "description": "Function fn_create_post modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_update_post",
      "description": "Mutation function fn_update_post should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_update_post",
      "description": "Function fn_update_post modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_comment",
      "description": "Mutation function fn_create_comment should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_create_comment",
      "description": "Function fn_create_comment modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_delete_post",
      "description": "Mutation function fn_delete_post should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_delete_post",
      "description": "Function fn_delete_post modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-001",
      "rule_name": "Mutation: Simple vs Advanced Return Types",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_increment_view_count",
      "description": "Mutation function fn_increment_view_count should return JSONB, got JSON",
      "example_fix": "RETURNS JSONB AS $$ ... RETURN jsonb_build_object('success', true, ...); $$"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/migrations/002_functions.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "fn_increment_view_count",
      "description": "Function fn_increment_view_count modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/04_triggers/041_triggers.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_updated_at_column",
      "description": "Function update_updated_at_column modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/031_fn_user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "create_user",
      "description": "Function create_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/031_fn_user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "update_user_profile",
      "description": "Function update_user_profile modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/02_read/022_post/0222_tv_post.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tv_post",
      "description": "Table tv_post missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/blog_api/db/0_schema/02_read/022_post/0222_tv_post.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tv_post",
      "description": "Table tv_post could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "VW-002",
      "rule_name": "View: Include pk_* Only If Referenced",
      "severity": "WARNING",
      "file_path": "examples/blog_api/db/0_schema/02_read/023_comment/0231_v_comment.sql",
      "line_number": null,
      "violation_type": "view",
      "entity_name": "v_comment",
      "description": "View v_comment includes pk_* column - verify other views JOIN to it",
      "example_fix": "Only include pk_* if other views use it in JOIN conditions"
    },
    {
      "rule_id": "TR-001",
      "rule_name": "Trinity: INTEGER Primary Key",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/02_read/023_comment/0232_tv_comment.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tv_comment",
      "description": "Table tv_comment missing INTEGER pk_* primary key",
      "example_fix": "pk_user INTEGER GENERATED ALWAYS AS IDENTITY PRIMARY KEY"
    },
    {
      "rule_id": "TR-003",
      "rule_name": "Trinity: TEXT Identifier (Optional)",
      "severity": "INFO",
      "file_path": "examples/blog_api/db/0_schema/02_read/023_comment/0232_tv_comment.sql",
      "line_number": null,
      "violation_type": "table",
      "entity_name": "tv_comment",
      "description": "Table tv_comment could benefit from 'identifier TEXT UNIQUE' for SEO-friendly slugs",
      "example_fix": "identifier TEXT UNIQUE  -- Human-readable slug"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/032_post_functions/0322_sync_post.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_post",
      "description": "Function sync_tv_post modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/032_post_functions/0322_sync_post.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_post_single",
      "description": "Function sync_tv_post_single modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/033_comment_functions/0332_sync_comment.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_comment",
      "description": "Function sync_tv_comment modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/033_comment_functions/0332_sync_comment.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_comment_single",
      "description": "Function sync_tv_comment_single modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/031_user_functions/0312_sync_user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_user",
      "description": "Function sync_tv_user modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    },
    {
      "rule_id": "MF-002",
      "rule_name": "Mutation: Explicit Sync for tv_* Tables",
      "severity": "ERROR",
      "file_path": "examples/blog_api/db/0_schema/03_functions/031_user_functions/0312_sync_user.sql",
      "line_number": null,
      "violation_type": "function",
      "entity_name": "sync_tv_user_single",
      "description": "Function sync_tv_user_single modifies data but missing sync calls",
      "example_fix": "PERFORM app.sync_tv_entity(); after data modifications"
    }
  ],
  "compliance_score": 0.3666666666666667
}
