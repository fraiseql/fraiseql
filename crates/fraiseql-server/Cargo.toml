[[bench]]
harness = false
name = "performance_benchmarks"

[dependencies]
# Encryption
aes-gcm = "0.10"
# Error handling
anyhow = "1.0"
async-trait = "0.1"
aws-config = {version = "1", optional = true}
# AWS S3 (optional)
aws-sdk-s3 = {version = "1", optional = true}
# HTTP server
axum = {version = "0.8", features = ["macros", "ws"]}
base64 = "0.22"
# File processing
bytes = "1"
# AEAD encryption for state protection (PKCE)
chacha20poly1305 = "0.10"
# Date/time handling
chrono = {version = "0.4", features = ["serde"]}
dashmap = "5.5"
dirs = "5"
# Phase 4: Cache support for API endpoints
fraiseql-arrow = {path = "../fraiseql-arrow", version = "0.1.0"}
# FraiseQL core
fraiseql-core = {path = "../fraiseql-core", version = "2.0.0-alpha.3", features = ["postgres"]}
fraiseql-error = {path = "../fraiseql-error", version = "2.0.0-alpha.3"}
# FraiseQL observers (optional)
fraiseql-observers = {path = "../fraiseql-observers", version = "2.0.0-alpha.3", optional = true}
futures = "0.3"
# GraphQL AST parsing for secure query validation
graphql-parser = {workspace = true}
hex = "0.4"
# Webhook signature verification
hmac = "0.12"
http = "1"
image = {version = "0.24", features = ["jpeg", "png", "webp"]}
infer = "0.15"
# Authentication (JWT, OAuth, OIDC)
jsonwebtoken = "9.2"
# Metrics (optional)
metrics = {version = "0.22", optional = true}
metrics-exporter-prometheus = {version = "0.14", optional = true}
mime_guess = "2"
# OpenTelemetry (optional)
opentelemetry = {version = "0.22", optional = true}
opentelemetry-otlp = {version = "0.15", features = ["http-proto"], optional = true}
opentelemetry_sdk = {version = "0.22", features = ["rt-tokio"], optional = true}
pin-project = "1"
rand = "0.8"
# Redis for rate limiting (optional)
redis = {version = "0.25.4", features = ["aio", "tokio-comp", "connection-manager"], optional = true}
reqwest = {version = "0.12", features = ["json"]}
# TLS/SSL support
rustls = "0.23"
rustls-pemfile = "2.2"
# Serialization
serde = {version = "1.0", features = ["derive"]}
serde_json = "1.0"
sha1 = "0.10"
sha2 = "0.10"
# Database
sqlx = {version = "0.8", features = ["postgres", "runtime-tokio", "uuid", "chrono"]}
# Constant-time comparison (timing attack prevention)
subtle = "2.5"
thiserror = "2.0"
# Async runtime
tokio = {version = "1.45", features = ["full", "signal"]}
tokio-rustls = "0.25"
# Config and paths
toml = "0.8"
# Arrow Flight server (optional)
tonic = {version = "0.12", optional = true}
tower = {version = "0.5", features = ["full"]}
tower-http = {version = "0.6", features = ["trace", "cors", "compression-full", "limit", "timeout", "request-id"]}
# Tracing
tracing = "0.1"
tracing-opentelemetry = {version = "0.23", optional = true}
tracing-subscriber = {version = "0.3", features = ["env-filter", "json"]}
urlencoding = "2.1"
# UUID generation
uuid = {version = "1.0", features = ["v4", "serde"]}
zeroize = "1.8"

[dev-dependencies]
# Performance testing
criterion = {version = "0.5", features = ["async_tokio"]}
futures = "0.3"
# HTTP testing
reqwest = {version = "0.12", features = ["json"]}
# YAML parsing for deployment tests
serde_yaml = "0.9"
# Database testing
sqlx = {version = "0.8", features = ["runtime-tokio", "postgres"]}
tempfile = "3.13"
# Testing
tokio-test = "0.4"
# Utilities for E2E tests
tokio-util = "0.7"
wiremock = "0.6"

[features]
# Arrow Flight server for high-performance data delivery
arrow = ["tonic"]
aws-s3 = ["aws-sdk-s3", "aws-config"]
cors = []
database = []
default = []
metrics = ["dep:metrics", "metrics-exporter-prometheus"]
# Observer system for reactive business logic
observers = ["fraiseql-observers"]
observers-full = ["observers", "fraiseql-observers/phase8", "fraiseql-observers/nats"]
observers-nats = ["observers", "fraiseql-observers/nats"]
redis-rate-limiting = ["redis"]
testing = []
tracing-opentelemetry = ["opentelemetry", "opentelemetry_sdk", "opentelemetry-otlp", "dep:tracing-opentelemetry"]
# Wire backend for streaming JSON queries with low memory overhead
wire-backend = ["fraiseql-core/wire-backend"]

[package]
authors = ["FraiseQL Contributors"]
categories = ["database", "web-programming::http-server"]
description = "HTTP server for FraiseQL v2 GraphQL engine"
edition = "2021"
keywords = ["graphql", "sql", "database", "server", "api"]
license = "MIT OR Apache-2.0"
name = "fraiseql-server"
repository = "https://github.com/fraiseql/fraiseql"
rust-version = "1.75"
version = "2.0.0-alpha.3"
