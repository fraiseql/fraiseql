<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="900" height="500" fill="#0f0f1e"/>

    <!-- Title -->
    <text x="450" y="30" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">
        Relationships & N+1 Problem
    </text>

    <!-- Left side: Traditional GraphQL -->
    <text x="225" y="70" font-size="16" font-weight="bold" fill="#ff6b9d">Traditional GraphQL</text>
    <text x="225" y="95" font-size="12" fill="#a0a0b0">(21 Database Queries)</text>

    <!-- Users box -->
    <rect x="120" y="120" width="210" height="60" fill="#2a2a3e" stroke="#ff6b9d" stroke-width="2" rx="8"/>
    <text x="225" y="145" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">1 Query: Fetch 20 Users</text>
    <text x="225" y="165" font-size="11" fill="#a0a0b0" text-anchor="middle">SELECT * FROM users LIMIT 20</text>

    <!-- Individual queries -->
    <g>
        <text x="145" y="210" font-size="11" fill="#ff6b9d" font-weight="bold">20 × (1 Query per User)</text>
        <rect x="120" y="220" width="210" height="40" fill="#2a2a3e" stroke="#ff6b9d" stroke-width="1" rx="6"/>
        <text x="225" y="240" font-size="11" fill="#ffffff" text-anchor="middle">SELECT * FROM posts WHERE author_id = ?</text>
        <text x="225" y="255" font-size="10" fill="#ff6b9d" text-anchor="middle">× 20 = 20 Queries</text>
    </g>

    <!-- Total for traditional -->
    <rect x="120" y="290" width="210" height="50" fill="#2a2a3e" stroke="#ff6b9d" stroke-width="2" rx="8"/>
    <text x="225" y="310" font-size="12" font-weight="bold" fill="#ff6b9d" text-anchor="middle">Total: 21 Queries ❌</text>
    <text x="225" y="330" font-size="10" fill="#a0a0b0" text-anchor="middle">Slow for large datasets</text>

    <!-- Arrow between sections -->
    <text x="450" y="370" font-size="14" font-weight="bold" fill="#5c6bff" text-anchor="middle">VS</text>

    <!-- Right side: FraiseQL -->
    <text x="675" y="70" font-size="16" font-weight="bold" fill="#4ade80">FraiseQL (Compiled)</text>
    <text x="675" y="95" font-size="12" fill="#a0a0b0">(1 Database Query)</text>

    <!-- Single JOIN query -->
    <rect x="570" y="120" width="210" height="100" fill="#2a2a3e" stroke="#4ade80" stroke-width="2" rx="8"/>
    <text x="675" y="145" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">1 Optimized Query:</text>
    <text x="675" y="165" font-size="10" fill="#ffffff" text-anchor="middle" font-family="monospace">SELECT u.*, p.*</text>
    <text x="675" y="180" font-size="10" fill="#ffffff" text-anchor="middle" font-family="monospace">FROM users u</text>
    <text x="675" y="195" font-size="10" fill="#ffffff" text-anchor="middle" font-family="monospace">LEFT JOIN posts p</text>
    <text x="675" y="210" font-size="10" fill="#ffffff" text-anchor="middle" font-family="monospace">ON p.author_id = u.id</text>

    <!-- Total for FraiseQL -->
    <rect x="570" y="250" width="210" height="50" fill="#2a2a3e" stroke="#4ade80" stroke-width="2" rx="8"/>
    <text x="675" y="270" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">Total: 1 Query ✅</text>
    <text x="675" y="290" font-size="10" fill="#a0a0b0" text-anchor="middle">20x faster for 20 users</text>

    <!-- Explanation box -->
    <rect x="50" y="380" width="800" height="100" fill="#1a1a2e" stroke="#5c6bff" stroke-width="2" rx="8"/>
    <text x="70" y="405" font-size="13" font-weight="bold" fill="#5c6bff">How FraiseQL Eliminates N+1:</text>
    <text x="70" y="430" font-size="12" fill="#ffffff">
        • FraiseQL compiles your GraphQL schema at build time, pre-computing optimal SQL joins
    </text>
    <text x="70" y="455" font-size="12" fill="#ffffff">
        • When you query users with their posts, FraiseQL generates a single JOIN query automatically
    </text>
    <text x="70" y="475" font-size="12" fill="#ffffff">
        • No field selection overhead - only requested fields are fetched from the database
    </text>
</svg>
