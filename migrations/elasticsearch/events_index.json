{
  "index_patterns": ["fraiseql-events-*"],
  "template": {
    "settings": {
      "number_of_shards": 3,
      "number_of_replicas": 1,
      "index.lifecycle.name": "fraiseql-events-policy",
      "index.lifecycle.rollover_alias": "fraiseql-events"
    },
    "mappings": {
      "properties": {
        "event_id": {
          "type": "keyword",
          "description": "Unique event identifier"
        },
        "event_type": {
          "type": "keyword",
          "description": "Type of event (created, updated, deleted, custom)"
        },
        "entity_type": {
          "type": "keyword",
          "description": "Type of entity affected (User, Product, Order, etc.)"
        },
        "entity_id": {
          "type": "keyword",
          "description": "ID of the entity affected"
        },
        "timestamp": {
          "type": "date",
          "description": "When the event occurred (UTC)"
        },
        "data": {
          "type": "object",
          "enabled": true,
          "description": "Event data as JSON object"
        },
        "changes": {
          "type": "object",
          "enabled": true,
          "description": "Field changes for UPDATE events (old and new values)"
        },
        "user_id": {
          "type": "keyword",
          "description": "User ID who triggered the event (nullable)"
        },
        "search_text": {
          "type": "text",
          "analyzer": "standard",
          "description": "Full-text searchable field combining event details"
        }
      }
    }
  }
}
